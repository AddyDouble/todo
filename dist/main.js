(()=>{"use strict";const e=(()=>{let e=[];const t=t=>e.some((e=>e.name===t)),n=n=>{t(n)||e.push((e=>{let t=[];const n=e=>t.some((t=>t.title===e));return{name:e,tasks:t,addTask:(e,l)=>{n(e)||t.push(((e,t)=>({title:e,date:t}))(e,l))},removeTask:e=>{n(e)&&t.splice((e=>{for(let n=0;n<t.length;n++)if(t[n].title===e)return n;return-1})(e),1)}}})(n))};return{init:()=>{n("Default")},addProject:n,deleteProject:n=>{t(n)&&(e=e.filter((e=>e.name!==n)))},getProjects:()=>e,getProject:t=>{for(let n=0;n<e.length;n++)if(e[n].name===t)return e[n];return null}}})();(()=>{const t=document.querySelector(".project-tasks"),n=document.querySelector(".project-list"),l=document.querySelector(".project-title"),r=e=>{let t=document.createElement("li"),n=document.createElement("span");if(n.classList.add("projectItemTitle"),n.innerText=e,t.appendChild(n),"Default"!==e){let e=document.createElement("button");e.classList.add("projectDeleteBtn"),e.addEventListener("click",(e=>{o(e)})),e.innerText="Del",t.appendChild(e)}return t},o=t=>{let n=t.target.parentElement.querySelector(".projectItemTitle").innerText;e.deleteProject(n),a()},c=()=>{const t=document.querySelector("#projectFormTitle");null===e.getProject(t.value)&&e.addProject(t.value),document.querySelector("#projectFormTitle").value="",a()},a=()=>{n.innerHTML="";let t=e.getProjects();for(let e=0;e<t.length;e++)n.appendChild(r(t[e].name))},i=(e,t)=>{let n=document.createElement("li"),l=document.createElement("div");l.classList.add("task-info");let r=document.createElement("span"),o=document.createElement("span");r.classList.add("task-title"),r.innerText=e,""!==t.trim()?o.innerText=t:o.innerText="None",l.appendChild(r),l.appendChild(o),n.appendChild(l);let c=document.createElement("button");return c.classList.add("taskDeleteBtn"),c.addEventListener("click",(e=>{d(e)})),n.appendChild(c),n},d=t=>{let n=t.target.parentElement.querySelector(".task-title").innerText;e.getProject(l.innerText).removeTask(n),u()},s=()=>{const e=document.querySelector("#taskFormTitle"),t=document.querySelector("#taskFormDate");e.value="",t.value=""},u=()=>{t.innerHTML="";let n=e.getProject(l.innerText).tasks;for(let e=0;e<n.length;e++)t.appendChild(i(n[e].title,n[e].date))};return{init:()=>{e.init(),(()=>{const t=document.querySelector("#initTask"),n=document.querySelector(".modal");t.addEventListener("click",(()=>{n.style.display="block"})),window.onclick=e=>{e.target==n&&(s(),n.style.display="none")},document.querySelector(".task-form").addEventListener("submit",(t=>{t.preventDefault(),(""!==document.querySelector("#taskFormTitle").value.trim()||(alert("Task title is required"),0))&&((()=>{let t=document.querySelector("#taskFormTitle").value,n=document.querySelector("#taskFormDate").value;e.getProject(l.innerText).addTask(t,n),u()})(),s(),n.style.display="none")}))})(),a(),u(),(()=>{const e=document.querySelector("#initProject"),t=document.querySelector(".projectForm");e.style.display="block",t.style.display="none",e.addEventListener("click",(()=>{e.style.display="none",t.style.display="flex"})),document.querySelector("#projectFormCancel").addEventListener("click",(()=>{e.style.display="block",t.style.display="none"})),document.querySelector("#projectFormConfirm").addEventListener("click",(()=>{""!==document.querySelector("#projectFormTitle").value.trim()&&(c(),e.style.display="block",t.style.display="none")}))})()}}})().init()})();
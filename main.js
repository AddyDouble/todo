(()=>{"use strict";const e=(()=>{let e=[];const t=t=>e.some((e=>e.name===t)),l=l=>{t(l)||e.push((e=>{let t=[];const l=e=>t.some((t=>t.title===e)),r=e=>{for(let l=0;l<t.length;l++)if(t[l].title===e)return l;return-1};return{name:e,tasks:t,addTask:(e,r,n)=>{l(e)||t.push(((e,t,l)=>({title:e,date:t,checked:l}))(e,r,n))},removeTask:e=>{l(e)&&t.splice(r(e),1)},editTask:(e,n,s,c)=>{if(!l(e))return;let o=r(e);null!=n&&(t[o].title=n),null!=s&&(t[o].date=s),null!=c&&(t[o].checked=c)}}})(l))};return{init:()=>{l("Default")},addProject:l,deleteProject:l=>{t(l)&&(e=e.filter((e=>e.name!==l)))},getProjects:()=>e,getProject:t=>{for(let l=0;l<e.length;l++)if(e[l].name===t)return e[l];return null}}})();(()=>{const t=document.querySelector(".js-project-tasks"),l=document.querySelector(".js-project-list"),r=document.querySelector(".js-project-title");let n;const s=e=>{let t=document.createElement("li"),l=document.createElement("span");if(l.classList.add("js-project-item-title"),l.innerText=e,t.appendChild(l),"Default"!==e){let e=document.createElement("button");e.classList.add("js-project-delete-button"),e.addEventListener("click",(e=>{o(e)})),e.style.display="none",t.addEventListener("mouseenter",(e=>{e.currentTarget.querySelector(".js-project-delete-button").style.display="block"})),t.addEventListener("mouseleave",(e=>{e.currentTarget.querySelector(".js-project-delete-button").style.display="none"})),t.appendChild(e)}return t.addEventListener("click",(e=>{c(e)})),e===n&&t.classList.add("project-selected"),t},c=e=>{if("BUTTON"===e.target.nodeName)return;let t=e.currentTarget.querySelector(".js-project-item-title").innerText;t!==n&&(n=t,r.innerText=t,document.querySelector("#js-init-task").style.display="block",i(),j())},o=t=>{let l=t.target.parentElement.querySelector(".js-project-item-title").innerText;e.deleteProject(l),l===n&&(r.innerText="",n="",document.querySelector("#js-init-task").style.display="none",j()),i()},a=()=>{document.querySelector("#js-project-form-title").value=""},d=()=>{const t=document.querySelector("#js-project-form-title");null===e.getProject(t.value)&&e.addProject(t.value),a(),i()},i=()=>{l.innerHTML="";let t=e.getProjects();for(let e=0;e<t.length;e++)l.appendChild(s(t[e].name))},u=(e,t,l)=>{let r=document.createElement("li"),n=document.createElement("div");n.classList.add("js-task-info");let s=document.createElement("span"),c=document.createElement("span");s.classList.add("js-task-title"),c.classList.add("js-task-date"),s.innerText=e,c.innerText="Date: ",""!==t.trim()?c.innerText+=t:c.innerText+="None",n.appendChild(s),n.appendChild(c),r.appendChild(n);let o=document.createElement("button");return o.classList.add("js-task-delete-button"),o.addEventListener("click",(e=>{m(e)})),o.style.display="none",r.appendChild(o),r.addEventListener("click",(e=>{y(e)})),r.addEventListener("mouseenter",(e=>{e.currentTarget.querySelector(".js-task-delete-button").style.display="block"})),r.addEventListener("mouseleave",(e=>{e.currentTarget.querySelector(".js-task-delete-button").style.display="none"})),l&&r.classList.add("task-checked"),r},y=t=>{if("BUTTON"===t.target.nodeName)return;let l=t.currentTarget.classList.toggle("task-checked"),r=t.currentTarget.querySelector(".js-task-title").innerText;e.getProject(n).editTask(r,null,null,l)},m=t=>{let l=t.target.parentElement.querySelector(".js-task-title").innerText;e.getProject(n).removeTask(l),j()},p=()=>{const e=document.querySelector("#js-task-form-title"),t=document.querySelector("#js-task-form-date");e.value="",t.value=""},j=()=>{if(t.innerHTML="",""===n)return;let l=e.getProject(n).tasks;for(let e=0;e<l.length;e++)t.appendChild(u(l[e].title,l[e].date,l[e].checked))};return{init:()=>{n="Default",e.init(),(()=>{const e=document.querySelector("#js-project-list-button"),t=document.querySelector(".sidebar"),l=document.querySelector(".project-body");e.addEventListener("click",(()=>{"none"===t.style.display?(t.style.display="block",l.style.display="none"):(t.style.display="none",l.style.display="flex")}))})(),(()=>{const t=document.querySelector("#js-init-task"),l=document.querySelector(".modal");t.addEventListener("click",(()=>{l.style.display="block"})),window.onclick=e=>{e.target==l&&(p(),l.style.display="none")},document.querySelector(".js-task-form").addEventListener("submit",(t=>{t.preventDefault(),(""!==document.querySelector("#js-task-form-title").value.trim()||(alert("Task title is required"),0))&&((()=>{let t=document.querySelector("#js-task-form-title").value,l=document.querySelector("#js-task-form-date").value;e.getProject(n).addTask(t,l,!1),j()})(),p(),l.style.display="none")}))})(),i(),j(),(()=>{const e=document.querySelector("#js-init-project"),t=document.querySelector(".js-project-form");e.style.display="block",t.style.display="none",e.addEventListener("click",(()=>{e.style.display="none",t.style.display="flex"})),document.querySelector("#js-project-form-cancel").addEventListener("click",(()=>{a(),e.style.display="block",t.style.display="none"})),document.querySelector("#js-project-form-confirm").addEventListener("click",(()=>{""!==document.querySelector("#js-project-form-title").value.trim()&&(d(),e.style.display="block",t.style.display="none")}))})()}}})().init()})();
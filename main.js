(()=>{"use strict";const e=(()=>{let e=[];const t=t=>e.some((e=>e.name===t)),n=n=>{t(n)||e.push((e=>{let t=[];const n=e=>t.some((t=>t.title===e));return{name:e,tasks:t,addTask:(e,l)=>{n(e)||t.push(((e,t)=>({title:e,date:t}))(e,l))},removeTask:e=>{n(e)&&t.splice((e=>{for(let n=0;n<t.length;n++)if(t[n].title===e)return n;return-1})(e),1)}}})(n))};return{init:()=>{n("Default")},addProject:n,deleteProject:n=>{t(n)&&(e=e.filter((e=>e.name!==n)))},getProjects:()=>e,getProject:t=>{for(let n=0;n<e.length;n++)if(e[n].name===t)return e[n];return null}}})();(()=>{const t=document.querySelector(".js-project-tasks"),n=document.querySelector(".project-list"),l=document.querySelector(".js-project-title"),r=e=>{let t=document.createElement("li"),n=document.createElement("span");if(n.classList.add("js-project-item-title"),n.innerText=e,t.appendChild(n),"Default"!==e){let e=document.createElement("button");e.classList.add("js-project-delete-button"),e.addEventListener("click",(e=>{o(e)})),e.innerText="Del",t.appendChild(e)}return t},o=t=>{let n=t.target.parentElement.querySelector(".js-project-item-title").innerText;e.deleteProject(n),a()},c=()=>{document.querySelector("#js-project-form-title").value=""},s=()=>{const t=document.querySelector("#js-project-form-title");null===e.getProject(t.value)&&e.addProject(t.value),c(),a()},a=()=>{n.innerHTML="";let t=e.getProjects();for(let e=0;e<t.length;e++)n.appendChild(r(t[e].name))},i=(e,t)=>{let n=document.createElement("li"),l=document.createElement("div");l.classList.add("js-task-info");let r=document.createElement("span"),o=document.createElement("span");r.classList.add("js-task-title"),r.innerText=e,""!==t.trim()?o.innerText=t:o.innerText="None",l.appendChild(r),l.appendChild(o),n.appendChild(l);let c=document.createElement("button");return c.classList.add("js-task-delete-button"),c.addEventListener("click",(e=>{d(e)})),n.appendChild(c),n},d=t=>{let n=t.target.parentElement.querySelector(".js-task-title").innerText;e.getProject(l.innerText).removeTask(n),m()},u=()=>{const e=document.querySelector("#js-task-form-title"),t=document.querySelector("#js-task-form-date");e.value="",t.value=""},m=()=>{t.innerHTML="";let n=e.getProject(l.innerText).tasks;for(let e=0;e<n.length;e++)t.appendChild(i(n[e].title,n[e].date))};return{init:()=>{e.init(),(()=>{const t=document.querySelector("#js-init-task"),n=document.querySelector(".modal");t.addEventListener("click",(()=>{n.style.display="block"})),window.onclick=e=>{e.target==n&&(u(),n.style.display="none")},document.querySelector(".js-task-form").addEventListener("submit",(t=>{t.preventDefault(),(""!==document.querySelector("#js-task-form-title").value.trim()||(alert("Task title is required"),0))&&((()=>{let t=document.querySelector("#js-task-form-title").value,n=document.querySelector("#js-task-form-date").value;e.getProject(l.innerText).addTask(t,n),m()})(),u(),n.style.display="none")}))})(),a(),m(),(()=>{const e=document.querySelector("#js-init-project"),t=document.querySelector(".js-project-form");e.style.display="block",t.style.display="none",e.addEventListener("click",(()=>{e.style.display="none",t.style.display="flex"})),document.querySelector("#js-project-form-cancel").addEventListener("click",(()=>{c(),e.style.display="block",t.style.display="none"})),document.querySelector("#js-project-form-confirm").addEventListener("click",(()=>{""!==document.querySelector("#js-project-form-title").value.trim()&&(s(),e.style.display="block",t.style.display="none")}))})()}}})().init()})();